/* 회원가입 시 시퀀스 넘버 생성 */
CREATE SEQUENCE SEQ_MEMBER_NO
INCREMENT BY 1
START WITH 1
MINVALUE 1
MAXVALUE 99999
NOCYCLE
NOCACHE
NOORDER;

COMMIT;

/* 관리자 계정 추가 */
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'admin', 'admin01', 'admin@admin.com', '관리자1', '04540^^^서울시 중구 남대문로 120^^^2층',
'01012341234', NULL, 0, DEFAULT, DEFAULT, 8, 3, 5);


/* 점주 계정 */
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'manager1', '123123', 'manager1@admin.com', '점주1', '04540^^^서울시 중구 남대문로 120^^^3층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 11, 5, 6);
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'manager2', '123123', 'manager2@admin.com', '점주2', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 11, 5, 6);
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'test01', '123123', 'test01@test.com', '사원', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 10, 4, 5);
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'test02', '123123', 'test02@test.com', '팀장', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 10, 4, 3);
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'test03', '123123', 'test03@test.com', '부장', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 10, 4, 2);
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'test04', '123123', 'test04@test.com', '부사장', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 0, 0, 1);
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'test05', '123123', 'test05@test.com', '사장', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 0, 0, 0);

INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'test06', '123123', 'test06@test.com', '정유진', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 6, 1, 3);

INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'test07', '123123', 'test07@test.com', '이유진', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 6, 2, 3);

DELETE FROM "AUTH_KEY" 
WHERE AUTH_KEY_NO = 7;
COMMIT;



ROLLBACK;


/* 점주 생성 */
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'manager3', '123123', 'manager3@admin.com', '점주3', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 11, 5, 6);
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'manager4', '123123', 'manager4@admin.com', '점주4', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 11, 5, 6);
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'manager5', '123123', 'manager5@admin.com', '점주5', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 11, 5, 6);
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'manager6', '123123', 'manager6@admin.com', '점주6', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 11, 5, 6);
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'manager7', '123123', 'manager7@admin.com', '점주7', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 11, 5, 6);
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'manager8', '123123', 'manager8@admin.com', '점주8', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 11, 5, 6);
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'manager9', '123123', 'manager9@admin.com', '점주9', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 11, 5, 6);
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'manager10', '123123', 'manager10@admin.com', '점주10', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 11, 5, 6);
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'manager11', '123123', 'manager11@admin.com', '점주11', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 11, 5, 6);
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'manager12', '123123', 'manager12@admin.com', '점주12', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 11, 5, 6);
COMMIT;


INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'manager12', '123123', 'manager12@admin.com', '점주12', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 11, 5, 6);
COMMIT;
INSERT INTO "MEMBER"
VALUES(SEQ_MEMBER_NO.NEXTVAL, 'manager12', '123123', 'manager12@admin.com', '점주12', '04540^^^서울시 중구 남대문로 120^^^4층',
'01012341234', NULL, 1, DEFAULT, DEFAULT, 11, 5, 6);
COMMIT;


SELECT COUNT(*) FROM MEMBER
JOIN 
WHERE STORE_NO = 123;


SELECT COUNT(*) FROM MEMBER
WHERE MEMBER_ID = member02
AND MEMBER_EMAIL = mkmk0607@gmail.com
AND MEMBER_DEL_FL = 'N';






SELECT * FROM "MEMBER";


/* 관리자 계정 생성 확인 및 로그인 가능 여부 체크 */
SELECT MEMBER_NO, MEMBER_ID, MEMBER_PW, MEMBER_EMAIL, MEMBER_NAME, MEMBER_ADDRESS,
MEMBER_TEL, MEMBER_PROFILE, MEMBER_AUTHORITY, 
	TO_CHAR(MEMBER_ENROLL_DATE, 'YYYY"년" MM"월" DD"일" HH24"시" MI"분" SS"초"') ENROLL_DATE
FROM "MEMBER"
WHERE MEMBER_DEL_FL = 'N'
		 AND MEMBER_ID = 'admin';
		 
		

CREATE SEQUENCE SEQ_BOARD_NO NOCACHE;


SELECT * FROM AUTH_KEY;
		
/* 작성일 보드에 삽입 */
ALTER TABLE BOARD ADD BOARD_WRITE_DATE DATE DEFAULT SYSDATE NOT NULL;
COMMIT;
ALTER TABLE BOARD DROP COLUMN BOARD_WRITE_DATE;
/* 작성일 보드에 삽입 */
ALTER TABLE BOARD ADD BOARD_DEL_FL CHAR(1) DEFAULT 'N' NOT NULL;
COMMIT;
ALTER TABLE BOARD DROP COLUMN BOARD_WRITE_DATE;
		
		
DELETE FROM "BOARD" 
WHERE BOARD_NO = 4;
COMMIT;
	
		
		
		
		
		
		
		
		
SELECT MEMBER_NO, DEPARTMENT_NO,TEAM_NO, GRADE_NO, MEMBER_TEL, MEMBER_ADDRESS,
MEMBER_ENROLL_DATE, DEPARTMENT_NAME, TEAM_NAME, GRADE_NAME
FROM MEMBER
JOIN TEAM USING (TEAM_NO)
JOIN DEPARTMENT USING (DEPARTMENT_NO)
JOIN GRADE USING (GRADE_NO);


		SELECT BOARD_NO, BOARD_TITLE, BOARD_ATTACH, BOARD_HITS, MEMBER_NO, BOARD_CODE_NO,
		BOARD_WRITE_DATE
		, MEMBER_NAME
		FROM BOARD
		JOIN "MEMBER" USING(MEMBER_NO)
		WHERE BOARD_DEL_FL = 'N'
		AND BOARD_CODE_NO = 1
		ORDER BY BOARD_NO DESC;
	
	SELECT BOARD_CODE_NAME FROM BOARD_CODE
	WHERE BOARD_CODE_NO = 1;




/* 셀프 데이터 삽입 */
INSERT INTO "BOARD"
		VALUES(1, '제목입니다', '내용입니다', NULL, default, 6, 1);


/* 게시판 별 코드 생성 */
INSERT INTO BOARD_CODE
VALUES(2, '자유게시판');
INSERT INTO BOARD_CODE
VALUES(3, '익명게시판');
COMMIT;


/* 컬럼추가 */
ALTER TABLE BOARD_COMMENT  ADD MEMBER_NO NUMBER NOT NULL;

COMMIT;

		INSERT INTO "COMMENT"
		VALUES(BOARD_COMMENT_NO, BOARD_COMMENT_CONTENT, BOARD_NO, BOARD_COMMENT_PARENT, MEMBER_NO)
		JOIN "BOARD" USING(BOARD_NO);
	

		INSERT INTO "BOARD_COMMENT"
		(BOARD_COMMENT_NO, BOARD_COMMENT_CONTENT, BOARD_NO, BOARD_COMMENT_PARENT, MEMBER_NO)
		VALUES
		(SEQ_BOARD_COMMENT_NO.NEXTVAL, '테스트', 201, null, 6);
	COMMIT;












